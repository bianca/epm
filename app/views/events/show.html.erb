<% title @event.display_name %>

<% if can? :update, @event %>
  <%= link_to 'Edit', edit_event_path(@event) %>
<% end %>
<% if can? :destroy, @event %>
  <%= link_to 'Delete', @event, method: :delete, data: { confirm: 'Are you sure?' } %>
<% end %>

<% if @event.participatable_by? current_user %>
  <p><strong>
    <% if @event.participants.include? current_user %>
      <%= link_to 'Cancel RSVP', unattend_event_path(@event), method: :patch %>
    <% else %>
      <%= link_to 'Join', attend_event_path(@event), method: :patch %>
    <% end %>
  </strong></p>
<% end %>

<% if @event.description.present? %>
  <p><%= @event.description %></p>
<% end %>

<% if @event.start.present? %>
  <p><%= @event.when %> (<%= pluralize @event.duration_hours, 'hour' %>)</p>
<% end %>

<section>

  <h2>Coordinator</h2>
  <% if @event.coordinator %>
    <%= render 'users/user', user: @event.coordinator %>
  <% else %>
    None set.
  <% end %>

  <% if @event.can_have_participants? %>
    <h2>Participants</h2>
    <% if @event.participants.any? %>
      <ul>
        <% @event.participants.each do |user| %>
          <%= render 'users/user', user: user, tag: 'li' %>
        <% end %>
      </ul>
    <% else %>
      <p>None yet.</p>
    <% end %>
  <% end %>

</section>