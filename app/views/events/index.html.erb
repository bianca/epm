<% content_for :header  do %>
  <% if can? :calendar, Event %>
    <%= link_to 'Monthly Calendar', calendar_events_path %>
  <% end %>
  <% if can? :create, Event %>
    <%= link_to 'Add New Event', new_event_path %>
  <% end %>
<% end %>

<% events_shown = false %>
<% @sections.each do |section| %>
  <% if section[:q].any? %>
    <section id="<%= section[:id] || section[:name].downcase.gsub(' ', '_') %>">
      <% events_shown = true %>
      <h2><%= section[:name] %></h2>
      <%= render 'events', events: section[:q] %>
    </section>
  <% end %>
<% end %>

<%= content_tag(:p, 'There are no events yet.') unless events_shown %>