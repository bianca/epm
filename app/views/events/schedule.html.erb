<script language="">    
	$(document).ready(function () {
        $(".av").click(function () {
        	var id = $(this).attr("id")
        	var new_id = id.replace("_switch", "")
        	var switch_value = $("#"+new_id).val() == "true" ? true : false
        	switch_value = !switch_value
        	$("#"+new_id).val(switch_value)
        	if (!!switch_value) {
        		$(this).removeClass("clicked")
        	} else {
        		$(this).addClass("clicked")
        	}
        	var str = ""
        	for (var i=1; i<43; i++) {
        		var v = $("#availability_"+i).val()
        		str = str + (v == "true" ? 1 : 0).toString()
        	}
        	$("#event_owner_availability").val(str)
        	
         	//
      	});
    });
</script>
<style>
td {
	font-size: 10px;
}
.av {
	width: 60px;
	height: 30px;
	background-color: #00ff00;
}
.clicked {
	background-color: #ff0000;

}
.av:before {
	content: "Available";
}
.av.clicked:before {
	content: "Unavailable";
}
.start {
	font-weight: bold;
}

p {
	max-width : 100%;
	color: #444;
}
</style>
<p class="start">
Welcome to NFFTT’s fruit picking portal. This is where you can register trees, edit your tree information, and schedule a pick request. 
</p>
<p>
Please select dates and times you would prefer a group of volunteers to come pick your tree. Ideally the dates you select is when the tree will be at peak ripeness. Please refer to our Fruit Ripening Guide for help identifying peak ripeness.
 
</p>
<%= form_for Event.new do |f| %>
<table>
<tr>
<td></td>
<%
	time_of_day = ["Morning (9am-1pm)","Afternoon (1pm-5pm)","Evening (5pm-9pm)"]
	start = Time.zone.now + 7.days
	(1..14).each do |i| %>
		<td><%=(start + (i).day).strftime("%a %b %d") %></td>
	<% 
	end
%>
</tr>
<%
	(1..3).each do |i| 
		%><tr>
		<td>
		<%=time_of_day[i-1] %>
		</td>
		<%
		(1..14).each do |j| %>
			<td class="av" id="availability_switch_<%=((i-1)*14+j).to_s %>">
				<input type="hidden" id="availability_<%=((i-1)*14+j).to_s %>" value="true" />
			</td>
		<% 
		end
		%></tr><%
	end
%>
</table>
<p>
If your tree is no longer pickable (dead, diseased, cut down, etc.), please indicate this under your tree profile. 
</p>
<p>
We will do our best to match a group of volunteers to your tree. You don’t need to be home for us to pick, unless it’s necessary for us to gain access to the tree - or you want to see us in action! We ask you to lend us a ladder or borrow one from a neighbour to help us reach the higher branches.The volunteers will collect as much as they can safely pick in up to two hours and the harvest will be shared: 1/3 to you, 1/3 to the volunteers, and 1/3 to a food bank, shelter or community kitchen.
</p>
<p>
We will send you a confirmation email once the pick has been scheduled. 
</p>
<p>
Thank you for participating in NFFTT’s fruit picking program, and sharing fruit with your community.
</p> 
<!-- f.hidden_field :tree_ids, value: params['tree_id'] %-->
<%= hidden_field_tag  "event[tree_ids][]",params['tree_id'] %> 
<%= f.hidden_field :owner_availability %>
<%= f.hidden_field :owner_availability_start, value: start %>
<%= submit %>
<% end %>


